<div class="todo-form" role="form" aria-labelledby="form-title">
  <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
    <div class="form-group">
      <label for="todo-title" class="visually-hidden">Nova tarefa</label>
      <input 
        id="todo-title"
        type="text" 
        formControlName="title"
        placeholder="Digite uma nova tarefa"
        class="form-input"
        [disabled]="isSubmitting"
        [attr.aria-describedby]="form.get('title')?.errors ? 'title-error' : null"
        [attr.aria-invalid]="form.get('title')?.errors ? 'true' : 'false'"
        required
      />
      <div 
        id="title-error" 
        class="error-message" 
        *ngIf="form.get('title')?.errors && form.get('title')?.touched"
        role="alert"
      >
        <span class="visually-hidden" *ngIf="form.get('title')?.errors?.['required']">O título da tarefa é obrigatório.</span>
        <span class="visually-hidden" *ngIf="form.get('title')?.errors?.['minlength']">O título deve ter pelo menos 3 caracteres.</span>
      </div>
      <button 
        type="submit"
        class="btn"
        [disabled]="isSubmitting || !form.get('title')?.value?.toString().trim() || form.invalid"
        [attr.aria-describedby]="isSubmitting ? 'submit-status' : null"
      >
        <span *ngIf="!isSubmitting">Adicionar</span>
      </button>
    </div>
  </form>
</div>
